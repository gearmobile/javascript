## Стили элемента - свойство `style`

[JavaScript - Styles and Classes](http://learn.javascript.ru/styles-and-classes)

Свойство `element.style` возвращает *объект*, который дает доступ к *стилю элемента на чтение и запись*.

С его помощью можно *изменять* большинство CSS-свойств, например `element.style.width="100px"` работает так, как будто у элемента в атрибуте прописано `style="width:100px"`.

### Единицы измерения обязательны в `style`

Об этом иногда забывают, но в `style` так же, как и в CSS, нужно **указывать единицы измерения**, например `px`. Ни в коем случае не просто `elem.style.width = 100` — **работать не будет**.

#### Для свойств, названия которых состоят из нескольких слов, используется вотТакаяЗапись:

* `background-color  => elem.style.backgroundColor`
* `z-index           => elem.style.zIndex`
* `border-left-width => elem.style.borderLeftWidth`

Пример использования `style`:

`document.body.style.backgroundColor = prompt('background color?', 'green');`

##### `style.cssFloat` вместо `style.float`

Исключением является свойство `float`. В старом стандарте JavaScript слово "float" было зарезервировано и недоступно для использования в качестве свойства объекта. Поэтому используется не `elem.style.float`, а `elem.style.cssFloat`.


### Полный стиль из `getComputedStyle`

Итак, свойство `style` дает доступ только к той информации, которая хранится в `elem.style`.

Он не скажет ничего об отступе, если он появился в результате наложения CSS или встроенных стилей браузера.

А если мы хотим, например, сделать анимацию и плавно увеличивать `marginTop` **от текущего значения**? Как нам сделать это? Ведь для начала нам надо это **текущее значение получить**.

Для того, чтобы **получить текущее используемое значение свойства**, используется метод `window.getComputedStyle`, описанный в стандарте DOM Level 2.

Его синтаксис таков:

```javascript
`getComputedStyle(element[, pseudo])`

`element`
    Элемент, значения для которого нужно получить
`pseudo`
    Указывается, если нужен **стиль псевдо-элемента**, например `::before`. Пустая строка или отсутствие аргумента означают сам элемент.
```

Поддерживается всеми браузерами, кроме IE8-. Следующий код будет работать во всех не-IE браузерах и в IE9+:

```javascript
<style>
  body {
    margin: 10px
  }
</style>

<body>

  <script>
    var computedStyle = getComputedStyle(document.body);
    alert( computedStyle.marginTop ); // выведет отступ в пикселях
    alert( computedStyle.color ); // выведет цвет
  </script>

</body>
```

### **Вычисленное** (`computed`) и **окончательное** (`resolved`) значения

В CSS есть **две концепции**:

* **Вычисленное** (`computed`) значение — это то, которое получено **после применения всех правил CSS и CSS-наследования**. Например, `width: auto` или `font-size: 125%`.
* **Окончательное** (`resolved`) значение — **непосредственно применяемое к элементу**. При этом все размеры приводятся к пикселям, например `width: 212px` или `font-size: 16px`. В некоторых браузерах пиксели могут быть дробными.

Когда-то `getComputedStyle` задумывалось для **возврата вычисленного значения**, но со временем оказалось, что **окончательное** гораздо удобнее.

Поэтому сейчас в целом все значения возвращаются именно **окончательные**, кроме некоторых небольших глюков в браузерах, которые постепенно вычищаются.

**`getComputedStyle` требует полное свойство!**

Для правильного получения значения нужно указать точное свойство. Например: `paddingLeft`, `marginTop`, `borderLeftWidth`.

При обращении к сокращенному: `padding`, `margin`, `border` — **правильный результат не гарантируется**.

Действительно, допустим свойства `paddingLeft/paddingTop` взяты из разных классов CSS. Браузер не обязан объединять их в одно свойство `padding`. Иногда, в простейших случаях, когда свойство задано сразу целиком, getComputedStyle сработает для сокращённого свойства, но не во всех браузерах.

Например, некоторые браузеры (Chrome) выведут 10px в документе ниже, а некоторые (Firefox) — нет:

<style>
  body {
    margin: 10px;
  }
</style>
<script>
  var style = getComputedStyle(document.body);
  alert( style.margin ); // в Firefox пустая строка
</script>

**Стили посещенных ссылок — тайна!**

У посещенных ссылок может быть другой цвет, фон, чем у обычных. Это можно поставить в CSS с помощью псевдокласса `:visited`.

Но `getComputedStyle` не дает доступ к этой информации, чтобы произвольная страница не могла определить, посещал ли пользователь ту или иную ссылку.

Кроме того, большинство браузеров запрещают применять к `:visited` CSS-стили, которые могут изменить геометрию элемента, чтобы даже окольным путем нельзя было это понять. В целях безопасности.


## Итого

Все DOM-элементы предоставляют следующие свойства.

* Свойство `style` — это **объект**, в котором CSS-свойства пишутся `вотТакВот`. Чтение и изменение его свойств — это, по сути, работа с компонентами атрибута `style`.
* `style.cssText` — строка стилей для чтения или записи. Аналог полного атрибута `style`.
* Свойство `currentStyle(IE8-)` и метод `getComputedStyle` (IE9+, стандарт) позволяют получить реальное, применённое сейчас к элементу свойство стиля с учётом CSS-каскада и браузерных стилей по умолчанию.

При этом `currentStyle` возвращает значение из CSS, до окончательных вычислений, а `getComputedStyle` — **окончательное, непосредственно применённое к элементу** (как правило).

Более полная информация о свойстве `style`, включающая другие, реже используемые методы работы с ним, доступна в документации.
